<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>

<BorderPane fx:id="root" prefWidth="1280" prefHeight="860" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.todo.desktop.ui.controller.MainShellController" 
            style="-fx-background-color: linear-gradient(to bottom right, #0f172a 0%, #1f2937 100%);"
            stylesheets="@styles.css">
    <fx:define>
        <ToggleGroup fx:id="mainNavGroup"/>
    </fx:define>
    <padding>
        <Insets top="36" right="36" bottom="36" left="36"/>
    </padding>
    <top>
        <VBox spacing="18">
            <HBox alignment="CENTER_LEFT" spacing="18">
                <VBox spacing="6">
                    <Label fx:id="sectionTitleLabel" text="Deadline" style="-fx-text-fill: white; -fx-font-size: 32px; -fx-font-weight: 700;"/>
                    <Label fx:id="sectionSubtitleLabel" text="Theo dõi công việc và email của bạn" style="-fx-text-fill: rgba(226,232,240,0.8); -fx-font-size: 15px;"/>
                </VBox>
                <Region HBox.hgrow="ALWAYS"/>
                <HBox alignment="CENTER_RIGHT" spacing="14">
                    <StackPane prefWidth="48" prefHeight="48" style="-fx-background-radius: 18; -fx-background-color: rgba(30,64,175,0.32);">
                        <ImageView fx:id="avatarImageView" fitWidth="48" fitHeight="48" preserveRatio="true" smooth="true" />
                        <Label fx:id="avatarFallback" text="A" style="-fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: 600;" visible="false" managed="false"/>
                    </StackPane>
                    <VBox alignment="CENTER_LEFT" spacing="2">
                        <Label fx:id="userNameLabel" text="Tên người dùng" style="-fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: 600;"/>
                        <Label fx:id="userEmailLabel" text="email@example.com" style="-fx-text-fill: rgba(226,232,240,0.75); -fx-font-size: 13px;"/>
                    </VBox>
                    <Button fx:id="signOutButton" text="Đăng xuất" onAction="#onSignOut" style="-fx-background-radius: 12; -fx-background-color: rgba(148,163,184,0.2); -fx-text-fill: white; -fx-font-weight: 600; -fx-padding: 10 18;"/>
                </HBox>
            </HBox>
        </VBox>
    </top>
    <center>
        <StackPane fx:id="contentContainer" style="-fx-background-color: rgba(15,23,42,0.82); -fx-background-radius: 28; -fx-padding: 28;" BorderPane.alignment="CENTER">
            <fx:include fx:id="deadlineOverview" source="deadline-overview.fxml"/>
            <fx:include fx:id="inboxView" source="inbox.fxml" visible="false" managed="false"/>
            <fx:include fx:id="emailDetailView" source="email-detail.fxml" visible="false" managed="false"/>
            <fx:include fx:id="settingsView" source="settings.fxml" visible="false" managed="false"/>
        </StackPane>
    </center>
    <bottom>
        <HBox alignment="CENTER" spacing="24" style="-fx-background-color: rgba(15,23,42,0.55); -fx-background-radius: 18; -fx-padding: 18 28 20 28;">
            <ToggleButton fx:id="deadlineToggle" text="Deadline" toggleGroup="$mainNavGroup" onAction="#showDeadline" styleClass="nav-toggle nav-toggle-active"/>
            <ToggleButton fx:id="emailToggle" text="Hộp thư" toggleGroup="$mainNavGroup" onAction="#showEmail" styleClass="nav-toggle"/>
            <ToggleButton fx:id="settingsToggle" text="Cài đặt" toggleGroup="$mainNavGroup" onAction="#showSettings" styleClass="nav-toggle"/>
        </HBox>
    </bottom>
</BorderPane>
