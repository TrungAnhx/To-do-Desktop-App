<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<StackPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
           fx:controller="com.todo.desktop.ui.controller.InboxController"
           stylesheets="@styles.css">
    <!-- Main Inbox View -->
    <VBox fx:id="inboxMainView" spacing="24" style="-fx-background-color: transparent;">
        <HBox alignment="CENTER_LEFT" spacing="16" style="-fx-padding: 20 24; -fx-background-color: rgba(45,55,72,0.6); -fx-background-radius: 16;">
            <Button fx:id="refreshButton" text="ðŸ”„ LÃ m má»›i" onAction="#onRefresh" styleClass="button-primary"
                    style="-fx-padding: 12 24; -fx-font-size: 14px; -fx-background-radius: 14; -fx-background-color: #3182ce; -fx-text-fill: #f7fafc;"/>
            <ToggleButton fx:id="unreadToggle" text="ðŸ“§ ChÆ°a Ä‘á»c" styleClass="toggle-button" style="-fx-background-radius: 14; -fx-padding: 10 20; -fx-font-size: 14px; -fx-background-color: rgba(49,130,206,0.2); -fx-text-fill: #63b3ed; -fx-border-color: #3182ce;"/>
            <ToggleButton fx:id="attachmentToggle" text="ðŸ“Ž CÃ³ tá»‡p" styleClass="toggle-button" style="-fx-background-radius: 14; -fx-padding: 10 20; -fx-font-size: 14px; -fx-background-color: rgba(49,130,206,0.2); -fx-text-fill: #63b3ed; -fx-border-color: #3182ce;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button fx:id="composeButton" text="âœ‰ Soáº¡n email" onAction="#onCompose" styleClass="button-success"
                    style="-fx-padding: 12 24; -fx-font-size: 14px; -fx-background-radius: 14; -fx-background-color: #38a169; -fx-text-fill: #f7fafc;"/>
        </HBox>
        <ListView fx:id="messageList" VBox.vgrow="ALWAYS" styleClass="list-view" style="-fx-background-color: transparent; -fx-border-radius: 16; -fx-padding: 0;"/>
    </VBox>
    
    <!-- Compose Email Overlay -->
    <VBox fx:id="composeEmailView" spacing="24" visible="false" managed="false" 
          styleClass="card-glass"
          style="-fx-background-color: rgba(15,23,42,0.98); -fx-padding: 32; -fx-max-width: 800;">
        
        <!-- Header -->
        <HBox alignment="CENTER_LEFT" spacing="16">
            <Label text="âœ‰ Soáº¡n email má»›i" styleClass="label-title" style="-fx-font-size: 22px;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button fx:id="closeComposeButton" text="âœ•" onAction="#onCloseCompose" 
                    style="-fx-background-color: rgba(148,163,184,0.2); -fx-text-fill: white; -fx-font-size: 16px; -fx-background-radius: 20; -fx-padding: 8 14; -fx-cursor: hand;"/>
        </HBox>
        
        <!-- Form Fields -->
        <VBox spacing="16">
            <VBox spacing="8">
                <Label text="NgÆ°á»i nháº­n" styleClass="label-subtitle" style="-fx-font-size: 13px; -fx-font-weight: 600;"/>
                <TextField fx:id="composeToField" promptText="email@example.com" styleClass="text-field"/>
            </VBox>
            
            <VBox spacing="8">
                <Label text="TiÃªu Ä‘á»" styleClass="label-subtitle" style="-fx-font-size: 13px; -fx-font-weight: 600;"/>
                <TextField fx:id="composeSubjectField" promptText="Nháº­p tiÃªu Ä‘á» email..." styleClass="text-field"/>
            </VBox>
            
            <VBox spacing="8">
                <Label text="Ná»™i dung" styleClass="label-subtitle" style="-fx-font-size: 13px; -fx-font-weight: 600;"/>
                <TextArea fx:id="composeBodyField" promptText="Viáº¿t ná»™i dung email cá»§a báº¡n..." 
                          prefRowCount="10" wrapText="true" styleClass="text-area"/>
            </VBox>
        </VBox>
        
        <!-- Attachments -->
        <VBox spacing="12">
            <HBox spacing="14" alignment="CENTER_LEFT">
                <Button fx:id="attachFilesButton" text="ðŸ“Ž ÄÃ­nh kÃ¨m file" onAction="#onAttachFiles" 
                        styleClass="button-secondary" style="-fx-padding: 10 20;"/>
                <Label fx:id="attachmentCountLabel" text="" styleClass="label-caption"/>
            </HBox>
            <VBox fx:id="attachmentListBox" spacing="8" visible="false" managed="false"/>
        </VBox>
        
        <!-- Status -->
        <Label fx:id="composeStatusLabel" text="" styleClass="label-subtitle"/>
        
        <!-- Actions -->
        <HBox spacing="16">
            <Button fx:id="sendEmailButton" text="âœ‰ Gá»­i email" onAction="#onSendComposedEmail" 
                    styleClass="button-primary" style="-fx-padding: 14 32; -fx-font-size: 15px;"/>
            <Button text="Há»§y" onAction="#onCloseCompose" styleClass="button-secondary"/>
        </HBox>
        
    </VBox>
</StackPane>
