<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<StackPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
           fx:controller="com.todo.desktop.ui.controller.InboxController"
           stylesheets="@styles.css"
           style="-fx-background-color: transparent;">
           
    <!-- Main Inbox View -->
    <VBox fx:id="inboxMainView" spacing="16" style="-fx-background-color: transparent;">
        
        <!-- Header Area -->
        <VBox spacing="12">
            <HBox alignment="CENTER_LEFT" spacing="16">
                <Label text="Há»™p thÆ° Ä‘áº¿n" styleClass="header-large"/>
                <Region HBox.hgrow="ALWAYS"/>
                <TextField promptText="TÃ¬m kiáº¿m email..." styleClass="search-bar" prefWidth="300"/>
                <Button fx:id="refreshButton" text="ðŸ”„" onAction="#onRefresh" styleClass="button-icon">
                    <tooltip><Tooltip text="LÃ m má»›i"/></tooltip>
                </Button>
            </HBox>
            
            <!-- Filters -->
            <HBox spacing="8" alignment="CENTER_LEFT">
                <ToggleButton fx:id="allToggle" text="Táº¥t cáº£" selected="true" styleClass="filter-chip"/>
                <ToggleButton fx:id="unreadToggle" text="ChÆ°a Ä‘á»c" styleClass="filter-chip"/>
                <ToggleButton fx:id="attachmentToggle" text="CÃ³ tá»‡p Ä‘Ã­nh kÃ¨m" styleClass="filter-chip"/>
            </HBox>
        </VBox>

        <!-- Email List -->
        <ListView fx:id="messageList" VBox.vgrow="ALWAYS" styleClass="list-view"/>
    </VBox>

    <!-- Placeholder View -->
    <fx:include fx:id="placeholderView" source="placeholder-view.fxml" visible="false" managed="false"/>

    <!-- Floating Action Button (Compose) -->
    <Button fx:id="composeButton" onAction="#onCompose" styleClass="fab" StackPane.alignment="BOTTOM_RIGHT">
        <graphic>
            <Label text="+" style="-fx-text-fill: white; -fx-font-size: 28px; -fx-font-weight: bold; -fx-padding: -4 0 0 0;"/>
        </graphic>
        <StackPane.margin>
            <Insets right="16" bottom="16"/>
        </StackPane.margin>
        <tooltip><Tooltip text="Soáº¡n thÆ° má»›i"/></tooltip>
    </Button>
    
    <!-- Compose Email Overlay (Modal) -->
    <StackPane fx:id="composeEmailView" visible="false" managed="false" style="-fx-background-color: rgba(15, 23, 42, 0.4);">
        <VBox spacing="20" styleClass="card" style="-fx-max-width: 700; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 20, 0.0, 0, 8);">
            
            <!-- Header -->
            <HBox alignment="CENTER_LEFT" spacing="16">
                <Label text="Soáº¡n Email Má»›i" styleClass="header-medium"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button fx:id="closeComposeButton" text="âœ•" onAction="#onCloseCompose" styleClass="button-icon"/>
            </HBox>
            
            <!-- Form -->
            <VBox spacing="16">
                <TextField fx:id="composeToField" promptText="Äáº¿n: ngÆ°á»i-nháº­n@example.com" styleClass="text-field"/>
                <TextField fx:id="composeSubjectField" promptText="TiÃªu Ä‘á»" styleClass="text-field" style="-fx-font-weight: bold;"/>
                <TextArea fx:id="composeBodyField" promptText="Ná»™i dung email..." prefRowCount="12" wrapText="true" styleClass="text-area"/>
            </VBox>
            
            <!-- Footer -->
            <VBox spacing="12">
                <HBox spacing="12" alignment="CENTER_LEFT">
                    <Button fx:id="attachFilesButton" text="ðŸ“Ž ÄÃ­nh kÃ¨m tá»‡p" onAction="#onAttachFiles" styleClass="button-secondary"/>
                    <Label fx:id="attachmentCountLabel" text="" styleClass="text-caption"/>
                    <Region HBox.hgrow="ALWAYS"/>
                </HBox>
                
                <VBox fx:id="attachmentListBox" spacing="4" visible="false" managed="false"/>
                
                <Region style="-fx-background-color: #E2E8F0; -fx-min-height: 1; -fx-max-height: 1;" />
                
                <HBox spacing="12" alignment="CENTER_RIGHT">
                    <Label fx:id="composeStatusLabel" text="" styleClass="text-muted"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="Há»§y" onAction="#onCloseCompose" styleClass="button-secondary"/>
                    <Button fx:id="sendEmailButton" text="Gá»­i Email" onAction="#onSendComposedEmail" styleClass="button-primary"/>
                </HBox>
            </VBox>
        </VBox>
    </StackPane>
</StackPane>
